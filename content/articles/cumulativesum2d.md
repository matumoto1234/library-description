---
title: CumulativeSum2D
description: データ構造 二次元累積和
date: 2021/04/07
---

## 説明
二次元累積和をします

$query(sy,sx,gy,gx)$で左上$(sy,sx)$,右下$(gy,gx)$とした矩形区間の総和を求めます  
実装例ではイメージとしてはこんな風な半開区間でクエリを扱っています  
$[ (sy,sx), (gy,gx) )$

**前計算について**  
前計算ですが,一次元の累積和と似ています  
異なるところは引く矩形区間が重なってしまうので足してあげる部分です

例えば,以下のような値を持った縦3横4の平面があったとします
```
4 2 3 1
5 1 7 6
9 8 1 2
```

<br>

この平面中の
```
7 6
1 2
```
の部分を計算したいときは

<br>

```
4 2 3 1
5 1 7 6
9 8 1 2
```
から
```
4 2
5 1
9 8
```
と
```
4 2 3 1
```
を引いて,重複して二回引いた部分の
```
4 2
```
を足します

## 計算量
構築 $O(HW)$  
クエリ $O(1)$

## 実装例

```cpp import=/assets/Library/data-structure/cumulativesum2d.cpp
```
